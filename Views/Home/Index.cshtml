@model BiographyM
@using System.Text.Json
@{
    ViewData["Title"] = "Mücahit Demir";
}

<div class="container mt-5">
    <div class="row align-items-center g-4">
        <div class="col-md-4 text-center" data-aos="zoom-in">
            <div class="profile-frame">
                <img src="@Model.PhotoUrl" class="img-fluid rounded-circle shadow-lg" alt="Profil Foto" />
            </div>
        </div>

        <div class="col-md-8" data-aos="fade-left">
            <h1 class="display-4 fw-bold wcontent">Mücahit Demir</h1>
            <hr />
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <p><i class="bi bi-geo-alt-fill me-2"></i> Kocaeli</p>
                    <p>
                        <i class="bi bi-envelope-fill me-2"></i>
                        <a href="mailto:mucahtx789@mail.com">mucahtx789@gmail.com</a>
                    </p>
                    <p>
                        <i class="bi bi-github me-2"></i>
                        <a href="https://github.com/mucahtx789" target="_blank">GitHub</a>
                    </p>
                    <p>
                        <i class="bi bi-linkedin me-2"></i>
                        <a href="https://www.linkedin.com/in/m%C3%BCcahit-demir-a68508202/" target="_blank">LinkedIn</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- PROJELER -->
    <div class="container mt-5" data-aos="fade-up">
        <h1 class="display-4 fw-bold wcontent">Projelerim</h1>

        <div id="projects-react-root" data-projects='@Html.Raw(JsonSerializer.Serialize(ViewBag.Projects))'></div>

        <h1 class="display-5 mt-5 mb-4 wcontent" data-aos="fade-up">🧰 Kullandığım Teknolojiler</h1>
        <div class="wcontent" data-aos="fade-up">
            ASP.NET Core / MVC ,
            Entity Framework Core ,
            C# ,
            Java ,
            SQL Server ,
            Vue.js ,
            HTML / CSS ,
            Git & GitHub ,
            React ,
            JQuery ,
            Bootstrap ,
            Javascript
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <script>
        (function () {
            const e = React.createElement;
            const { useState } = React;

            function ProjectCard({ project }) {
                return e('div', { className: 'col-md-6 col-lg-4 mb-4', 'data-aos': 'zoom-in' },
                    e('div', { className: 'card h-100 shadow-sm' },
                        e('div', { className: 'card-body d-flex flex-column' },
                            e('h5', { className: 'card-title' }, project.Name),
                            e('p', { className: 'card-text flex-grow-1' }, project.Description),
                            e('a', { href: project.Link, target: '_blank', className: 'btn btn-primary mt-2' }, "Projeyi Gör")
                        )
                    )
                );
            }

            function ProjectBoard({ initial }) {
                const [search, setSearch] = useState('');
                const filtered = initial.filter(p => p.Name.toLowerCase().includes(search.toLowerCase()));

                return e('div', null,
                    e('div', { className: 'mb-3', 'data-aos': 'fade-up' },
                        e('input', {
                            type: 'text',
                            placeholder: 'Proje ara...',
                            className: 'form-control',
                            value: search,
                            onChange: e => setSearch(e.target.value)
                        })
                    ),
                    e('div', { className: 'row g-4' },
                        filtered.length > 0
                            ? filtered.map((p, i) => e(ProjectCard, { key: i, project: p }))
                            : e('div', { className: 'col-12', 'data-aos': 'fade-up' },
                                e('div', { className: 'alert alert-info' }, 'Aradığınız projeye uygun sonuç bulunamadı.')
                            )
                    )
                );
            }

            const mount = document.getElementById('projects-react-root');
            if (mount) {
                const initial = JSON.parse(mount.getAttribute('data-projects'));
                const root = ReactDOM.createRoot(mount);
                root.render(e(ProjectBoard, { initial }));
            }
        })();
    </script>
}
